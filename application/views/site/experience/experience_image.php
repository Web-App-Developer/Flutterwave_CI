<?php$this->load->view('site/templates/header');$this->load->view('site/experience/experience_head_side');error_reporting(1);if($this->config->item('s3_bucket_name') != '' && $this->config->item('s3_access_key') != '' && $this->config->item('s3_secret_key') != '')$aws = 'Yes';else $aws='No';?><script src="js/site/<?php echo SITE_COMMON_DEFINE ?>addExperience.js"></script><style>body{	/* [disabled]font-family:arial; */}#preview{color:#cc0000;font-size:12px}.imgList {max-height:150px;margin-left:5px;border:1px solid #dedede;padding:4px;	float:left;	}@media screen and (max-width: 380px){.img-holds{	height:100px !important;	}	}</style><script src="js/site/jquery.wallform.js"></script><script type="text/javascript">function imageval(){   /*Image size validation*/    	    //var img_count = $("#count").val();	   //Get reference of FileUpload.	    // var i;	    //for (i = 0; i <=img_count; i++) {	      var fileUpload = document.getElementById("photoimg");	    //}	    //Check whether the file is valid Image.	var regex = new RegExp("([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.png|.gif)$");	//if (regex.test(fileUpload.value.toLowerCase())) {	//Check whether HTML5 is supported.	//if (typeof (fileUpload.files) != "undefined") {	//Initiate the FileReader object.	var reader = new FileReader();	//Read the contents of Image File.	reader.readAsDataURL(fileUpload.files[0]);	reader.onload = function (e) {	//Initiate the JavaScript Image object.	var image = new Image();	//Set the Base64 string return from FileReader as source.	image.src = e.target.result;	//Validate the File Height and Width.	image.onload = function () {	var height = this.height;	var width = this.width;	//343 * 450	if (width < 360|| height < 580) {	alert("<?php if($this->lang->line('exp_img_err') != '') { echo stripslashes($this->lang->line('exp_img_err')); } else echo "Image Height and Width should have 360 * 580 px or Above."; ?>");	return false;	}		if (width > 3000 || height > 3000) {	alert("<?php if($this->lang->line('exp_img_err_below') != '') { echo stripslashes($this->lang->line('exp_img_err_below')); } else echo "Image Height and Width should have 3000 * 3000 px or Below."; ?>");	return false;	}		//alert("Uploaded image has valid Height and Width.");	//return true;	<?php if($aws == 'Yes') echo "uploadImage_aws();";else echo "uploadImage();";?>	};	}	//} else {	//alert("This browser does not support HTML5.");	//return false;	//}	/*} else {	alert("Please select a valid Image file.");	return false;	}*/	}function imageval(){   /*Image size validation*/    	    //var img_count = $("#count").val();	   //Get reference of FileUpload.	    // var i;	    //for (i = 0; i <=img_count; i++) {	      var fileUpload = document.getElementById("photoimg");	    //}	    //Check whether the file is valid Image.	var regex = new RegExp("([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.png|.gif)$");	//if (regex.test(fileUpload.value.toLowerCase())) {	//Check whether HTML5 is supported.	//if (typeof (fileUpload.files) != "undefined") {	//Initiate the FileReader object.	var reader = new FileReader();	//Read the contents of Image File.	reader.readAsDataURL(fileUpload.files[0]);	reader.onload = function (e) {	//Initiate the JavaScript Image object.	var image = new Image();	//Set the Base64 string return from FileReader as source.	image.src = e.target.result;	//Validate the File Height and Width.	image.onload = function () {	var height = this.height;	var width = this.width;	//343 * 450	if (width < 360 || height < 580) {	alert("<?php if($this->lang->line('exp_img_err') != '') { echo stripslashes($this->lang->line('exp_img_err')); } else echo "Image Height and Width should have 360 * 580 px or Above."; ?>");	return false;	}		if (width > 3000 || height > 3000) {	alert("<?php if($this->lang->line('exp_img_err_below') != '') { echo stripslashes($this->lang->line('exp_img_err_below')); } else echo "Image Height and Width should have 3000 * 3000 px or Below."; ?>");	return false;	}		//alert("Uploaded image has valid Height and Width.");	//return true;	<?php if($aws == 'Yes') echo "uploadImage_aws();";else echo "uploadImage();";?>	};	}	//} else {	//alert("This browser does not support HTML5.");	//return false;	//}	/*} else {	alert("Please select a valid Image file.");	return false;	}*/	}function uploadImage(){	$("#imageform").ajaxForm({target: '#preview', 		beforeSubmit:function(){			$("#imageloadstatus").show();			$("#imageloadbutton").hide();		}, 		success:function(){		$("#imageloadstatus").hide();		$("#imageloadbutton").show();					},		error:function(){ 			$("#imageloadstatus").hide();			$("#imageloadbutton").show();		}	}).submit();}function uploadImage_aws(){		$("#imageloadstatus").show();	$("#imageloadbutton").hide();	$("#imageform").submit();}</script>		<div class="right_side nsd exp_pht">			<div class="dashboard_price_main">										<div class="margin_top_20 margin_bottom_20" >									<!--<span class="error text-center margin_top_20 margin_bottom_20"  id="error_basic">								<!--<small> * Please fill all mandatory fields</small>								</span>-->							</div>				<div class="lisdt-area" align="center" style="width:590px; border:dashed 2px #0099FF;">					<img src="images/site/cam.png">					<h3><?php /*if($this->lang->line('Addaphoto') != '') { echo stripslashes($this->lang->line('Addaphoto')); } else echo "Add photos for your experience!"; */?> <?php if($this->lang->line('exp_add_photos') != '') { echo stripslashes($this->lang->line('exp_add_photos')); } else echo "Add photos for your experience"; ?></h3>										<p><h3><small>Choose photos that showcase the location and what guests will be doing. photos must be at least (360 x 580px) (W*H) or Below (3000 X 3000px)  (W*H).</small></h3></p>					<form id="imageform" method="post" enctype="multipart/form-data" action='<?php echo base_url(); ?>site/experience/<?php if($aws == 'Yes')echo "ajaxImageUpload_aws";else echo "ajaxImageUpload";?>' style="clear:both">						<label><span class="add-photos"><?php if($this->lang->line('AddPhotos') != '') { echo stripslashes($this->lang->line('AddPhotos')); } else echo "Add Photos"; ?></span><input type="file"  name="photos" id="photoimg" multiple="true" style="display:none;" onchange="imageval();" /></label>						<div id='imageloadstatus' style='display:none'><img src="images/site/loader.gif" alt="Uploading...."/></div>						<div id='imageloadbutton' style="color:red;">							<small id='img_error_msg' style='display:none' ><?php if($this->lang->line('exp_img_must_be') != '') { echo stripslashes($this->lang->line('exp_img_must_be')); } else echo "Image size must be larger than than 365 x 548"; ?></small>							<input type="hidden" id="experience_id" name="experience_id" value="<?php echo $this->uri->segment(2); ?>" />						</div>					</form>				</div>				<div class="widget_content">								<input type="hidden" name="imagecount" id="imagecount" value="<?php echo $imgDetail->num_rows();?>" />					<?php  if (!empty($imgDetail)){ ?>					<ul>						<?php $this->session->set_userdata(array('product_image_'.$imgDetail->row()->id => $imgDetail->row()->image));						foreach ($imgDetail->result() as $img){ ?>						<li>													<input type="hidden" name="imaged[]" value="<?php echo $img->product_image; ?>"/>							<div class="img-holds">  <img src="<?php if(strpos($img->product_image, 's3.amazonaws.com') > 1)echo $img->product_image;else echo base_url()."server/php/experience/".$img->product_image; ?>"  height="80px" width="80px" /></div>																					<!--<a class="p_del tipTop" href="javascript:void(0)" onClick="javascript:SiteDeleteExperienceImage(<?php //echo $img->id; ?>,<?php //echo $listDetail->row()->id; ?>,<?php //echo $imgDetail->num_rows(); ?>);" title="<?php //if($this->lang->line('Delete this image') != '') { echo stripslashes($this->lang->line('Delete this image')); } else echo "Delete this image";?>"></a>-->																					<a class="p_del tipTop" href="javascript:void(0)" onClick="javascript:DeleteExperienceImage(<?php echo $img->id; ?>,<?php echo $listDetail->row()->id; ?>,<?php echo $imgDetail->num_rows(); ?>);" title="<?php if($this->lang->line('Delete this image') != '') { echo stripslashes($this->lang->line('Delete this image')); } else echo "Delete this image";?>"></a>																												<br/>												</li>						<?php	}  ?>											</ul>					<?php } ?><input type="hidden" name="image_count" id="image_count" value="<?php echo $imgDetail->num_rows(); ?>"/>										<?php /*<div class="exp-pic"><a href="<?php echo base_url()."experience_details/".$listDetail->row()->id;?>"><button class="next_button"><?php if($this->lang->line('Next') != '') { echo stripslashes($this->lang->line('Next')); } else echo "Next";?></button></a></div> */ ?>										<div class="basic-next nxt_btn_ctn">										 <button class="next_button" id="next-btn" type="button" ><?php if($this->lang->line('Save_and_Continue') != '') { echo stripslashes($this->lang->line('Save_and_Continue')); } else echo "Save & Continue";?></button>					 </div>					 					 <!--onClick="return check_image();" -->					 				</div>			</div>			<?php if ($listDetail->row()->video_url=='') { ?>			<span class="onclk-text" style="border-left: 1px solid #dcdada !important;"><?php if($this->lang->line('Want to add Video URL') != '') { echo stripslashes($this->lang->line('Want to add Video URL')); } else echo "Want to add Video URL";?>?&nbsp;<span onclick="show_block_cate('1')"><?php if($this->lang->line('You can add') != '') { echo stripslashes($this->lang->line('You can add')); } else echo "You can add";?>.</span></span>			<?php } ?>			<div class="dashboard_price_main" id="monthly" style="<?php if ($listDetail->row()->video_url=='') echo "display:none;";?> ">				<div class="overview_title video-url">					<label><?php if($this->lang->line('Video URL') != '') { echo stripslashes($this->lang->line('Video URL')); } else echo "Video URL";?></label>					<input type="text" value="<?php echo $listDetail->row()->video_url;?>" placeholder="<?php if($this->lang->line('video_url') != '') { echo stripslashes($this->lang->line('video_url')); } else echo "Enter video link";?>" class="title_overview" onchange="javascript:experienceDetailview(this,<?php echo $listDetail->row()->id; ?>,'video_url');" name="video_url" id="video_url_id" style="color:#000 !important;" />					<input type="hidden" id="id" name="id" value="<?php echo $listDetail->row()->id; ?>" />				</div>			</div>		</div>		<div class="calender_comments" id="dum_list">                        	<div class="calender_comment_content">                                	<i class="calender_comment_content_icon"><img src="images/calender_available_icon.jpg" /></i>                                        <div class="calender_comment_text">                                        	<h2><?php if($this->lang->line('exp_photo_video_url') != '') { echo stripslashes($this->lang->line('exp_photo_video_url')); } else echo "Make your canvas"; ?></h2>                                        	<p><?php if($this->lang->line('exp_gives_better') != '') { echo stripslashes($this->lang->line('exp_gives_better')); } else echo "“A picture is worth a thousand words”. Use the images to speak about your experience louder than words. You can add the pictures as well as video clips of your Experience. Explorers love photos that highlight the features of your Experience."; ?></p>                        <!--                        <p><strong>It will only be shared with guests after a reservation is confirmed.</strong></p>                        -->                                        </div>                                                                        </div>                        </div><script type="text/javascript">function SavePhotoCaption(id,caption){	$.ajax({		type:'POST',		dataType:'json',		url:'<?php echo base_url()?>site/experience/SavePhotoCaption',		data:{id:id,caption:caption},		success:function(response)		{}	});}function show_block_cate(columin_id){	$(".onclk-text").css("display","none");	$("#monthly").css("display","block");  }/* function check_image(){		 image_count = $('#image_count').val();		if(image_count == 0)	{		$('#error_basic').html('Please insert the image...');		$('#error_basic').fadeIn('slow', function () {		$(this).delay(5000).fadeOut('slow');		});		return false;	} 	} *//* $('form').each(function(){    $(this).submit(function(){        e.preventDefault();        alert('it works!');        return  false;    })}) */ $(document).ready(function() {    $('#next-btn').click(function(e) { 		var video_url=$("#video_url_id").val();	image_count = $('#image_count').val();		if (image_count=='0'){		alert("Please Upload Atleast One Image..!");	}else if (video_url!='' && image_count=='0'){		alert("Please Upload Atleast One Images..!");	}else{		 window.location.href = '<?php echo base_url()."what_we_do/".$id; ?>';	}	        });});</script><script type="text/javascript">function DeleteExperienceImage(prdID,imgID){imagecount=$('#imagecount').val();if(imagecount == 1){	alert("Photos are mandatory. So, Atleast One Photo Should be there..!");	return false;}else{				 $.ajax({			type:'post',			url:'site/experience/deleteProductImage',			data:{prdID:prdID},			dataType:'json',			success:function(json){				//alert(json);				$('#imgmsg_'+prdID).hide();				$('#imgmsg_'+prdID).show().text('Done').delay(800).text('');				window.location.href = "experience_image/"+imgID;			}		});	}}</script><?php$this->load->view('site/templates/footer');?>